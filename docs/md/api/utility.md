---
tag: utility
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


# utility

## POST /select

Select token(s) Selects one or more tokens in the Foundry VTT client.

### Parameters

| Name | Type | Required | Source | Description |
|------|------|----------|--------|--------------|
| clientId | string | âœ“ | query | Client ID for the Foundry world |
| uuids | array |  | body | Array of UUIDs to select |
| name | string |  | body | Name of the token(s) to select |
| data | object |  | body | Data to match for selection (e.g., "data.attributes.hp.value": 20) |
| overwrite | boolean |  | body | Whether to overwrite existing selection |
| all | boolean |  | body | Whether to select all tokens on the canvas |

### Returns

**object** - The selected token(s)

### Code Examples

<Tabs groupId="programming-language">
<TabItem value="javascript" label="JavaScript">

```javascript
const baseUrl = 'http://localhost:3010';
const path = '/select';
const params = {
  clientId: 'your-client-id'
};
const queryString = new URLSearchParams(params).toString();
const url = `${baseUrl}${path}?${queryString}`;

const response = await fetch(url, {
  method: 'POST',
  headers: {
    'x-api-key': 'your-api-key-here',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
      "all": true,
      "overwrite": true
    })
});
const data = await response.json();
console.log(data);
```

</TabItem>
<TabItem value="curl" label="cURL">

```bash
curl -X POST 'http://localhost:3010/select?clientId=your-client-id' \
  -H "x-api-key: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{"all":true,"overwrite":true}'
```

</TabItem>
<TabItem value="python" label="Python">

```python
import requests

base_url = 'http://localhost:3010'
path = '/select'
params = {
    'clientId': 'your-client-id'
}
url = f'{base_url}{path}'

response = requests.post(
    url,
    params=params,
    headers={
        'x-api-key': 'your-api-key-here'
    },
    json={
    "all": True,
    "overwrite": True
}
)
data = response.json()
print(data)
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript
import axios from 'axios';

(async () => {
  const baseUrl = 'http://localhost:3010';
  const path = '/select';
  const params = {
    clientId: 'your-client-id'
  };
  const queryString = new URLSearchParams(params).toString();
  const url = `${baseUrl}${path}?${queryString}`;

  const response = await axios({
    method: 'post',
    headers: {
      'x-api-key': 'your-api-key-here',
      'Content-Type': 'application/json'
    },
    url,
    data: {
        "all": true,
        "overwrite": true
      }
  });
  const data = response.data;
  console.log(data);
})();
```

</TabItem>
<TabItem value="emojicode" label="Emojicode">

```emojicode
ğŸ“¦ sockets ğŸ 

ğŸ’­ Emojicode HTTP Client
ğŸ’­ Compile: emojicodec example.ğŸ‡ -o example
ğŸ’­ Run: ./example

ğŸ ğŸ‡
  ğŸ’­ Connection settings
  ğŸ”¤localhostğŸ”¤ â¡ï¸ host
  3010 â¡ï¸ port
  ğŸ”¤/selectğŸ”¤ â¡ï¸ path

  ğŸ’­ Query parameters
  ğŸ”¤clientId=your-client-idğŸ”¤ â¡ï¸ clientId
  ğŸ”¤?ğŸ§²clientIdğŸ§²ğŸ”¤ â¡ï¸ queryString

  ğŸ’­ Request body
  ğŸ”¤{"all":true,"overwrite":true}ğŸ”¤ â¡ï¸ body

  ğŸ’­ Build HTTP request
  ğŸ”¤POST /selectğŸ§²queryStringğŸ§² HTTP/1.1âŒrâŒnHost: localhost:3010âŒrâŒnx-api-key: your-api-key-hereâŒrâŒnContent-Type: application/jsonâŒrâŒnContent-Length: 29âŒrâŒnâŒrâŒnğŸ§²bodyğŸ§²ğŸ”¤ â¡ï¸ request

  ğŸ’­ Connect and send
  ğŸº ğŸ†•ğŸ“ host portâ— â¡ï¸ socket
  ğŸº ğŸ’¬ socket ğŸ“‡ requestâ—â—
  
  ğŸ’­ Read and print response
  ğŸº ğŸ‘‚ socket 4096â— â¡ï¸ data
  ğŸ˜€ ğŸº ğŸ”¡ dataâ—â—
  
  ğŸ’­ Close socket
  ğŸšª socketâ—
ğŸ‰
```

</TabItem>
</Tabs>

#### Response

**Status:** 200

```json
{
  "requestId": "select_1765635990742",
  "clientId": "your-client-id",
  "type": "select-result",
  "success": true,
  "count": 1,
  "message": "1 entities selected",
  "selected": [
    "Scene.NUEDEFAULTSCENE0.Token.O4sEnBrG5I3lFNGk"
  ]
}
```


---

## GET /selected

Get selected token(s) Retrieves the currently selected token(s) in the Foundry VTT client.

### Parameters

| Name | Type | Required | Source | Description |
|------|------|----------|--------|--------------|
| clientId | string | âœ“ | query | Client ID for the Foundry world |

### Returns

**object** - The selected token(s)

### Code Examples

<Tabs groupId="programming-language">
<TabItem value="javascript" label="JavaScript">

```javascript
const baseUrl = 'http://localhost:3010';
const path = '/selected';
const params = {
  clientId: 'your-client-id'
};
const queryString = new URLSearchParams(params).toString();
const url = `${baseUrl}${path}?${queryString}`;

const response = await fetch(url, {
  method: 'GET',
  headers: {
    'x-api-key': 'your-api-key-here'
  }
});
const data = await response.json();
console.log(data);
```

</TabItem>
<TabItem value="curl" label="cURL">

```bash
curl -X GET 'http://localhost:3010/selected?clientId=your-client-id' \
  -H "x-api-key: your-api-key-here"
```

</TabItem>
<TabItem value="python" label="Python">

```python
import requests

base_url = 'http://localhost:3010'
path = '/selected'
params = {
    'clientId': 'your-client-id'
}
url = f'{base_url}{path}'

response = requests.get(
    url,
    params=params,
    headers={
        'x-api-key': 'your-api-key-here'
    }
)
data = response.json()
print(data)
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript
import axios from 'axios';

(async () => {
  const baseUrl = 'http://localhost:3010';
  const path = '/selected';
  const params = {
    clientId: 'your-client-id'
  };
  const queryString = new URLSearchParams(params).toString();
  const url = `${baseUrl}${path}?${queryString}`;

  const response = await axios({
    method: 'get',
    headers: {
      'x-api-key': 'your-api-key-here'
    },
    url
  });
  const data = response.data;
  console.log(data);
})();
```

</TabItem>
<TabItem value="emojicode" label="Emojicode">

```emojicode
ğŸ“¦ sockets ğŸ 

ğŸ’­ Emojicode HTTP Client
ğŸ’­ Compile: emojicodec example.ğŸ‡ -o example
ğŸ’­ Run: ./example

ğŸ ğŸ‡
  ğŸ’­ Connection settings
  ğŸ”¤localhostğŸ”¤ â¡ï¸ host
  3010 â¡ï¸ port
  ğŸ”¤/selectedğŸ”¤ â¡ï¸ path

  ğŸ’­ Query parameters
  ğŸ”¤clientId=your-client-idğŸ”¤ â¡ï¸ clientId
  ğŸ”¤?ğŸ§²clientIdğŸ§²ğŸ”¤ â¡ï¸ queryString

  ğŸ’­ Build HTTP request
  ğŸ”¤GET /selectedğŸ§²queryStringğŸ§² HTTP/1.1âŒrâŒnHost: localhost:3010âŒrâŒnx-api-key: your-api-key-hereâŒrâŒnâŒrâŒnğŸ”¤ â¡ï¸ request

  ğŸ’­ Connect and send
  ğŸº ğŸ†•ğŸ“ host portâ— â¡ï¸ socket
  ğŸº ğŸ’¬ socket ğŸ“‡ requestâ—â—
  
  ğŸ’­ Read and print response
  ğŸº ğŸ‘‚ socket 4096â— â¡ï¸ data
  ğŸ˜€ ğŸº ğŸ”¡ dataâ—â—
  
  ğŸ’­ Close socket
  ğŸšª socketâ—
ğŸ‰
```

</TabItem>
</Tabs>

#### Response

**Status:** 200

```json
{
  "requestId": "selected_1765635990772",
  "clientId": "your-client-id",
  "type": "selected-result",
  "success": true,
  "selected": [
    {
      "tokenUuid": "Scene.NUEDEFAULTSCENE0.Token.O4sEnBrG5I3lFNGk",
      "actorUuid": "Actor.xctPu6799LkAP6p3"
    }
  ]
}
```


---

## POST /execute-js

Execute JavaScript Executes a JavaScript script in the Foundry VTT client.

### Parameters

| Name | Type | Required | Source | Description |
|------|------|----------|--------|--------------|
| clientId | string | âœ“ | query | Client ID for the Foundry world |
| script | string |  | body | JavaScript script to execute |

### Returns

**object** - The result of the executed script

### Code Examples

<Tabs groupId="programming-language">
<TabItem value="javascript" label="JavaScript">

```javascript
const baseUrl = 'http://localhost:3010';
const path = '/execute-js';
const params = {
  clientId: 'your-client-id'
};
const queryString = new URLSearchParams(params).toString();
const url = `${baseUrl}${path}?${queryString}`;

const response = await fetch(url, {
  method: 'POST',
  headers: {
    'x-api-key': 'your-api-key-here',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
      "script": "const wsRelayUrl=game.settings.get(\"foundry-rest-api\", \"wsRelayUrl\");return wsRelayUrl;"
    })
});
const data = await response.json();
console.log(data);
```

</TabItem>
<TabItem value="curl" label="cURL">

```bash
curl -X POST 'http://localhost:3010/execute-js?clientId=your-client-id' \
  -H "x-api-key: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{"script":"const wsRelayUrl=game.settings.get(\"foundry-rest-api\", \"wsRelayUrl\");return wsRelayUrl;"}'
```

</TabItem>
<TabItem value="python" label="Python">

```python
import requests

base_url = 'http://localhost:3010'
path = '/execute-js'
params = {
    'clientId': 'your-client-id'
}
url = f'{base_url}{path}'

response = requests.post(
    url,
    params=params,
    headers={
        'x-api-key': 'your-api-key-here'
    },
    json={
    "script": "const wsRelayUrl=game.settings.get(\"foundry-rest-api\", \"wsRelayUrl\");return wsRelayUrl;"
}
)
data = response.json()
print(data)
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript
import axios from 'axios';

(async () => {
  const baseUrl = 'http://localhost:3010';
  const path = '/execute-js';
  const params = {
    clientId: 'your-client-id'
  };
  const queryString = new URLSearchParams(params).toString();
  const url = `${baseUrl}${path}?${queryString}`;

  const response = await axios({
    method: 'post',
    headers: {
      'x-api-key': 'your-api-key-here',
      'Content-Type': 'application/json'
    },
    url,
    data: {
        "script": "const wsRelayUrl=game.settings.get(\"foundry-rest-api\", \"wsRelayUrl\");return wsRelayUrl;"
      }
  });
  const data = response.data;
  console.log(data);
})();
```

</TabItem>
<TabItem value="emojicode" label="Emojicode">

```emojicode
ğŸ“¦ sockets ğŸ 

ğŸ’­ Emojicode HTTP Client
ğŸ’­ Compile: emojicodec example.ğŸ‡ -o example
ğŸ’­ Run: ./example

ğŸ ğŸ‡
  ğŸ’­ Connection settings
  ğŸ”¤localhostğŸ”¤ â¡ï¸ host
  3010 â¡ï¸ port
  ğŸ”¤/execute-jsğŸ”¤ â¡ï¸ path

  ğŸ’­ Query parameters
  ğŸ”¤clientId=your-client-idğŸ”¤ â¡ï¸ clientId
  ğŸ”¤?ğŸ§²clientIdğŸ§²ğŸ”¤ â¡ï¸ queryString

  ğŸ’­ Request body
  ğŸ”¤{"script":"const wsRelayUrl=game.settings.get(\"foundry-rest-api\", \"wsRelayUrl\");return wsRelayUrl;"}ğŸ”¤ â¡ï¸ body

  ğŸ’­ Build HTTP request
  ğŸ”¤POST /execute-jsğŸ§²queryStringğŸ§² HTTP/1.1âŒrâŒnHost: localhost:3010âŒrâŒnx-api-key: your-api-key-hereâŒrâŒnContent-Type: application/jsonâŒrâŒnContent-Length: 104âŒrâŒnâŒrâŒnğŸ§²bodyğŸ§²ğŸ”¤ â¡ï¸ request

  ğŸ’­ Connect and send
  ğŸº ğŸ†•ğŸ“ host portâ— â¡ï¸ socket
  ğŸº ğŸ’¬ socket ğŸ“‡ requestâ—â—
  
  ğŸ’­ Read and print response
  ğŸº ğŸ‘‚ socket 4096â— â¡ï¸ data
  ğŸ˜€ ğŸº ğŸ”¡ dataâ—â—
  
  ğŸ’­ Close socket
  ğŸšª socketâ—
ğŸ‰
```

</TabItem>
</Tabs>

#### Response

**Status:** 200

```json
{
  "requestId": "execute-js_1765635991162",
  "clientId": "your-client-id",
  "type": "execute-js-result",
  "success": true,
  "result": "ws://localhost:3010"
}
```

